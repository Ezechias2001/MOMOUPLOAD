{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
    {% include "__fragments/nav.html.twig" %}

<!-- Content -->
<div class="bg-soft-success">
  <div class="container content-space-3 content-space-t-md-1">
    <div class="mx-auto" style="max-width: 30rem;">
      <!-- Card -->
      <div class="card card-lg zi-2">
        <!-- Header -->
        <div class="card-header text-center mt-4">
          <h4 class="card-title">Connexion</h4>
          <p class="card-text">Vous n'avez pas encore un compte? <a class="link" href="{{path('app_register')}}">Inscrivez-vous</a></p>
        </div>
        <!-- End Header -->

        <!-- Card Body -->
        <div class="card-body">

        <form class="js-validate need-validate" method="post">
            {% if error %}
                <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}

            {% if app.user %}
                <div class="mb-3">
                    Vous êtes déjà connecté {{ app.user.userIdentifier }}, <br> <a href="{{ path('app_logout') }}">Se Deconnecter</a>
                </div>
            {% endif %}
            <!-- Form -->
                    <div class="mb-4">
                        <label class="form-label" for="loginFormEmail">Email</label>
                        <input  type="email" value="{{ last_username }}" name="email" id="loginFormEmail" class="form-control" autocomplete="email" required autofocus placeholder="email@site.com" aria-label="email@site.com" required>
                        <span class="invalid-feedback">Entrez une adresse mail valide</span>
                    </div>
                    <!-- End Form -->

                    <!-- Form -->
                    <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <label class="form-label" for="loginFormPassword">Mot de passe</label>
                        <a class="form-label-link" href="../page-reset-password.html">Mot de passe oublié ?</a>
                    </div>

                    <div class="input-group input-group-merge">
                        <input type="password" name="password" id="inputPassword"  autocomplete="current-password" required
                                class="js-toggle-password form-control" id="loginFormPassword" placeholder="6+ characteres requis" aria-label="8+ characteres requises"
                            >
                        <a id="loginFormChangePassTarget" class="input-group-append input-group-text" href="javascript:;">
                        </a>
                    </div>
                    
                    <span class="invalid-feedback">Votre mot de passe est invalide.Réessayez.</span>
                    </div>
                    <!-- End Form -->

                    <input type="hidden" name="_csrf_token"
                    value="{{ csrf_token('authenticate') }}"
                    >

                    <div class="d-grid mb-4">
                    <button type="submit" class="btn btn-primary btn-lg">Connexion</button>
                    </div>

        </form>
            
        </div>
        <!-- End Card Body -->
      </div>
      <!-- End Card -->
    </div>
  </div>
</div>
<!-- End Content -->

<!-- Shape -->
<div class="shape-container">
  <div class="shape shape-bottom zi-1">
    <svg viewBox="0 0 3000 1000" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 1000V583.723L3000 0V1000H0Z" fill="#fff"/>
    </svg>
  </div>
</div>
<!-- End Shape -->

{% endblock %}
